<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="https://use.typekit.net/xra3dmk.css">
    <link rel="stylesheet" href="./styles/style.css">

    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">

    <title>guest@term.noya: welcome!</title>
</head>
<body>

    <main>
        <noscript>
            <section class="system-message">
                <div class="info__heading comment">
                    <span class="comment__text comment__hashtags">######################################</span>
                    <h2 class="comment__text comment__heading">#&#x2022;Don't&#x2022;panic&#x2022;but&#x2022;something&#x2022;is&#x2022;wrong&#x2022;#</h2>
                    <span class="comment__text comment__hashtags">######################################</span>
                </div>
    
                <div class="info__content">
                    <p>The device you are currently using does not support/let us use javascript :(</p>
                    <p>This cool little website needs some javascript to <em>actually</em> be cool!</p>
                </div>
            </section>
        </noscript>

        <article>
            <header class="header">
                <img class="header__logo" src="./images/spider-logo.svg" alt="Spider Logo">

                <p class="js-typeWriter js-lastLog hide">Last Login: Wed 9 Nov 2022 04:47:23 PM on console</p>
                <p class="js-typeWriter hide">Type "help" to see available commands</p>
            </header>

            <form class="hide" method="GET" id="prompt-form">
                <fieldset class="prompt">
                    <div>
                        <label class="prompt__label" for="term-prompt"><span class="blue">guest</span><span class="green">@term.noya:</span><span class="blue">~</span></label>
                        <div class="growing-input js-growingInputContainer">
                            <input class="prompt__input" type="text" name="user_prompt" id="promptInputField" placeholder="help">
                        </div>
                    </div>
    
                    <p class="prompt__time js-current_time"></p>
                </fieldset>
            </form>

            <section class="info js-help hide">
                <div class="info__heading comment">
                    <span class="comment__text comment__hashtags"></span>
                    <h2 class="comment__text comment__heading">Command list</h2>
                    <span class="comment__text comment__hashtags"></span>
                </div>

                <div class="info__content">
                    <ul class="generic-list generic-list--help">
                        <li class="list__item">
                            <h3>help</h3>
                        </li>
                        <li class="list__item">
                            <h3>about</h3>
                        </li>
                        <li class="list__item">
                            <h3>projects</h3>
                        </li>
                        <li class="list__item">
                            <h3>skills</h3>
                        </li>
                        <li class="list__item">
                            <h3>contact</h3>
                        </li>
                        <li class="list__item">
                            <h3>clear</h3>
                        </li>
                    </ul>
                </div>
            </section>

            <section class="info js-about hide">
                <div class="info__heading comment">
                    <span class="comment__text comment__hashtags"></span>
                    <h2 class="comment__text comment__heading">Get to know me</h2>
                    <span class="comment__text comment__hashtags"></span>
                </div>

                <div class="info__content">
                    <p>&gt;_Hello! I guess you&#39;re here to read a little more about who I am and what I do.</p>
                    <p>&gt;_My name is Maijla Ikiz, I am a 24 y/o <s>nerd</s> full-stack web developer + designer by day and average video game enthusiast by night :)</p>
                    <p>&gt;_I am currently a third year Communication &amp; Multimedia Design student at the Amsterdam University of Applied Sciences. In the meantime I have also been working as a part-time web developer @ <a target='_blank' title="https://activo.nl" href="https://activo.nl">Activo</a> for over 4 years now.</p>
                </div>                

            </section>

            <section class="info js-skills hide">
                <div class="info__heading comment">
                    <span class="comment__text comment__hashtags"></span>
                    <h2 class="comment__text comment__heading">Things im good at</h2>
                    <span class="comment__text comment__hashtags"></span>
                </div>

                <div class="info__content">
                    <ul class="skills">
                        <li class="skill__item">
                            <p>HMTL</p>
                            <div class="skill__level">
                                <span class="skill__level__indicator js-skill-level-container" data-percentage="80">
                                    <span class="blue">[</span>
                                    <span class="js-level">----------</span>
                                    <span class="blue">]</span>
                                </span>
                                <p class="skill__level__percentage js-level-percentage">0%</p>
                            </div>
                        </li>
                        <li class="skill__item">
                            <p>CSS</p>
                            <div class="skill__level">
                                <span class="skill__level__indicator js-skill-level-container" data-percentage="60">
                                    <span class="blue">[</span>
                                    <span class="js-level">----------</span>
                                    <span class="blue">]</span>
                                </span>
                                <p class="skill__level__percentage js-level-percentage">0%</p>
                            </div>
                        </li>
                        <li class="skill__item">
                            <p>Javascript</p>
                            <div class="skill__level">
                                <span class="skill__level__indicator js-skill-level-container" data-percentage="80">
                                    <span class="blue">[</span>
                                    <span class="js-level">----------</span>
                                    <span class="blue">]</span>
                                </span>
                                <p class="skill__level__percentage js-level-percentage">0%</p>
                            </div>
                        </li>
                        <li class="skill__item">
                            <p>Node.js</p>
                            <div class="skill__level">
                                <span class="skill__level__indicator js-skill-level-container" data-percentage="50">
                                    <span class="blue">[</span>
                                    <span class="js-level">----------</span>
                                    <span class="blue">]</span>
                                </span>
                                <p class="skill__level__percentage js-level-percentage">0%</p>
                            </div>
                        </li>
                        <li class="skill__item">
                            <p>PHP</p>
                            <div class="skill__level">
                                <span class="skill__level__indicator js-skill-level-container" data-percentage="50">
                                    <span class="blue">[</span>
                                    <span class="js-level">----------</span>
                                    <span class="blue">]</span>
                                </span>
                                <p class="skill__level__percentage js-level-percentage">0%</p>
                            </div>
                        </li>
                        <li class="skill__item">
                            <p>SQL</p>
                            <div class="skill__level">
                                <span class="skill__level__indicator js-skill-level-container" data-percentage="50">
                                    <span class="blue">[</span>
                                    <span class="js-level">----------</span>
                                    <span class="blue">]</span>
                                </span>
                                <p class="skill__level__percentage js-level-percentage">0%</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </section>

            <section class="info js-projects hide">
                <div class="info__heading comment">
                    <span class="comment__text comment__hashtags"></span>
                    <h2 class="comment__text comment__heading">Projects I am proud of</h2>
                    <span class="comment__text comment__hashtags"></span>
                </div>

                <div class="info__content">
                    <ul class="generic-list">
                        <li class="list__item">
                            <a href="https://www.cmd-amsterdam.nl/portfolio/cmd-online/">
                                <h3>&#128279; CMD Online <span>~A browser based matching application that helps teachers of CMD create well-balanced project teams based on skills of students.</span></h3>
                            </a>
                            <ul class="list__item__tags">
                                <li class="tag tag--yellow">
                                    GDA 2022 Nominee
                                </li>
                                <li class="tag tag--red">
                                    HTML
                                </li>
                                <li class="tag tag--purple">
                                    CSS
                                </li>
                                <li class="tag tag--blue">
                                    JS
                                </li>
                                <li class="tag tag--green">
                                    Node.js
                                </li>
                            </ul>
                        </li>
                        <li class="list__item">
                            <h3>&gt;_Activibes <span>~A tool used at work to let other know how you're feeling everyday in order to improve team awareness and closeness.</span></h3>
                            <ul class="list__item__tags">
                                <li class="tag tag--red">
                                    HTML
                                </li>
                                <li class="tag tag--purple">
                                    CSS
                                </li>
                                <li class="tag tag--blue">
                                    JS
                                </li>
                                <li class="tag tag--green">
                                    Node.js
                                </li>
                            </ul>
                        </li>
                        <li class="list__item">
                            <h3>&gt;_Actiscan <span>~Web application that helps standholders scan leads via QR codes and form connections while being at an event.</span></h3>
                            <ul class="list__item__tags">
                                <li class="tag tag--red">
                                    HTML
                                </li>
                                <li class="tag tag--purple">
                                    CSS
                                </li>
                                <li class="tag tag--blue">
                                    JS
                                </li>
                                <li class="tag tag--green">
                                    Node.js
                                </li>
                            </ul>
                        </li>
                        <li class="list__item">
                            <a href="https://www.cmd-amsterdam.nl/portfolio/hacking-simulator-1-0/" target="_blank">
                                <h3>&#128279; Hacking Simulator <span>~A Cyberpunk 2077 inspired “simulator” I made in JS for a school assignment.</span></h3>
                            </a>
                            <ul class="list__item__tags">
                                <li class="tag tag--yellow">
                                    GDA 2021 Nominee
                                </li>
                                <li class="tag tag--red">
                                    HTML
                                </li>
                                <li class="tag tag--purple">
                                    CSS
                                </li>
                                <li class="tag tag--blue">
                                    JS
                                </li>
                                <li class="tag tag--green">
                                    Node.js
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>                

            </section>

            <section class="info js-contact hide">
                <div class="info__heading comment">
                    <span class="comment__text comment__hashtags"></span>
                    <h2 class="comment__text comment__heading">Contact</h2>
                    <span class="comment__text comment__hashtags"></span>
                </div>

                <div class="info__content">
                    <p>&gt;_Want to get in touch? Cool! You can contact me by sending me an <a href="mailto:planet1109@hotmail.com" target="_blank">e-mail</a>, and I will get back to you as soon as possible.</p>
                    <p>&gt;_You might be curious about my socials as well. Don't worry, I've got you covered!</p>

                    <ul class="generic-list generic-list--link">
                        <li class="list__item">
                            <a href="https://www.linkedin.com/in/maijla-ikiz-775bab178/" target="_blank">
                                <h3>&#128279; LinkedIn</h3>
                            </a>
                        </li>
                        <li class="list__item">
                            <a href="https://github.com/noyamirai" target="_blank">
                                <h3>&#128279; Github</h3>
                            </a>
                        </li>
                    </ul>
                </div>                

            </section>

        </article>

    </main>
    
    <script src="./scripts/utils.js"></script>
    <script src="./scripts/partials.js"></script>

    <script>

        const promptForms = document.querySelectorAll('form');
        const inputField = document.getElementById("promptInputField");
        const typeWriterText = document.querySelectorAll('.js-typeWriter');
        const commentHeadings = document.querySelectorAll('.comment');
        
        let previousPrompts = {};

        // Force focus on first prompt input
        inputField.focus();

        // Set styling for headings
        commentHeadings.forEach((headingContainer) => {
            setCommentHeading(headingContainer);
        });

        window.onunload = () => {
            logVisit();
        }

        window.onload = () => {

            let lastLogDate = retrieveLastVisit();
            const lastLogText = document.querySelector('.js-lastLog');
            lastLogDate = lastLogDate.replace(/,/g, '');

            lastLogText.textContent = 'Last Login: ' + lastLogDate + ' on console';

            setTimeout(() => {
                processParagraphs(typeWriterText, 0).then(() => {

                    // When done animating paragraphs -> show prompt form
                    setTimeout(() => {
                        const currentTimeIndicator = document.querySelector('.js-current_time');
                        currentTimeIndicator.innerHTML = getCurrentTime();
                        
                        const firstForm = document.querySelector('form');
                        firstForm.classList.remove('hide');
                        
                        inputField.focus();
                    }, 550);

                })
            }, 600);
        }

        // the browser fully loaded HTML, and the DOM tree is built
        document.addEventListener('DOMContentLoaded', () => {
            const currentTimeIndicator = document.querySelector('.js-current_time');
            currentTimeIndicator.innerHTML = getCurrentTime();

            setPercentageBars();
        });        


        // SOURCE: chat.openai.com/chat
        // Listens to any input field, in this case theres always only one input field
        articleElement.addEventListener("input", function(e) {
            
            const inputContainer = e.target.parentElement;

            if (e.target.value != '') {
                inputContainer.classList.add('typing');

                e.target.style.width = 0;
                const width = e.target.scrollWidth;

                e.target.style.width = width + "px";
                
                return;
            }

            inputContainer.classList.remove('typing');
            
            // back to default
            e.target.style.width = 100 + "%";
        });

        // Whenever inputfield 'blurs', reset width of input field
        // NOTE: could be multiple so we need to target the most 'recently' added input
        articleElement.addEventListener('focusout', (e) => {
            const newestPromptInput = document.querySelector('form:last-of-type input');

            if (e.target.id == newestPromptInput.id) {
                const inputContainer = e.target.parentElement;

                if (e.target.value == '') {
                    inputContainer.classList.remove('typing');
                    e.target.style.width = 100 + "%";
                }
            }
        });

        // On each submit within the article
        articleElement.addEventListener("submit", function(e){
            e.preventDefault();
            
            const commandList = ['help', 'about', 'projects', 'skills', 'contact']; 
            const sillyCommands = ['hi', 'hello', 'stinky', 'hehe'];

            const inputContainer = e.target.querySelector('.js-growingInputContainer');
            const currentInput = inputContainer.querySelector('input');
            const allPromptInputs = document.querySelectorAll('form');
    
            let value = currentInput.value;

            // Save user prompt for dislpaying on repaint
            previousPrompts[currentInput.id] = value;
            value = value.toLowerCase();

            // If command exists in basic commandList
            if (commandList.includes(value)) {
                inputContainer.classList.add('disabled');

                currentInput.disabled = true;
                currentInput.style.width = 'auto';

                // removes focus
                currentInput.blur();


                setTimeout(() => {

                    // If it is the first prompt submission (aka only one form element)
                    if (allPromptInputs.length == 1) {
                        const sectionToShow = document.querySelector('.js-' + value);
                        const otherSections = document.querySelectorAll('section:not(.js-' + value + ')');
                        
                        // Always 'first try' on load
                        if (sectionToShow) {
                            sectionToShow.classList.remove('hide');

                        // After clear we're back to only one prompt, but initially loaded sections don't exist anymore
                        } else {
                            revealSection(value).then(() => {
                                // Add new prompt only after a new section has been added into view
                                insertPromptPartial();
                                displayPrevData(previousPrompts);
                            });

                            return;
                        }

                        // Delete initial sections to avoid html clutter
                        otherSections.forEach(section => {
                            section.remove();
                        });

                    // After x prompt submissions
                    } else if (allPromptInputs.length > 1) {
                        revealSection(value).then(() => {
                            // Add new prompt only after a new section has been added into view
                            insertPromptPartial();
                            displayPrevData(previousPrompts);
                        });

                        return;
                    }
                    
                    // Create new prompt
                    insertPromptPartial();

                    // el.innerHtml resets form data so retrieve previous prompts and display in respective forms
                    displayPrevData(previousPrompts);

                }, 350);

                return;
            
            // If command exists in sillyCommands
            } else if (sillyCommands.includes(value)) {

                inputContainer.classList.add('disabled');
                currentInput.disabled = true;

                // removes focus
                currentInput.blur();
                inputContainer.classList.remove('typing');

                setTimeout(() => {
                    revealSillyContent(value);
    
                    // Create new prompt
                    insertPromptPartial();

                    // el.innerHtml resets form data so retrieve previous prompts and display in respective forms
                    displayPrevData(previousPrompts);
                }, 350);

                return;

            }

            // On clear -> 'reset' terminal
            if (value.toLowerCase() == 'clear') {
                const toRemove = articleElement.querySelectorAll('section, form:not(:last-of-type)');

                toRemove.forEach(element => {
                    element.remove();
                });

                const currentInput = inputContainer.querySelector('input');
                currentInput.value = null;

                // remove focus
                currentInput.focus();
                inputContainer.classList.remove('typing');

                // set new time
                const currentTimeLabel = e.target.querySelector('.js-current_time');
                currentTimeLabel.innerHTML = getCurrentTime();

                // scroll to top of page
                window.scrollTo(0, 0);

                return;
            }

            // User submitted unknown prompt

            inputContainer.classList.add('disabled');
            currentInput.disabled = true;

            // removes focus
            currentInput.blur();
            inputContainer.classList.remove('typing');

            setTimeout(() => {
                
                showError();
    
                // innerhtml resets form -> retrieve prev data and set
                displayPrevData(previousPrompts);
            }, 350);

            return;
        });

    </script>
    
</body>
</html>